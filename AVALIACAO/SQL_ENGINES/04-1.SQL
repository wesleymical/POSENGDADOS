-- Verificar se a tabela VOTACAO existe
IF OBJECT_ID('dbo.VOTACAO', 'U') IS NULL
BEGIN
    -- Criar a tabela VOTACAO
    CREATE TABLE VOTACAO (
        DT_GERACAO DATE,
        HH_GERACAO TIME,
        ANO_ELEICAO INT,
        CD_TIPO_ELEICAO INT,
        NM_TIPO_ELEICAO VARCHAR(255),
        NR_TURNO INT,
        CD_ELEICAO INT,
        DS_ELEICAO VARCHAR(255),
        DT_ELEICAO DATE,
        TP_ABRANGENCIA VARCHAR(255),
        SG_UF VARCHAR(2),
        SG_UE VARCHAR(255),
        NM_UE VARCHAR(255),
        CD_MUNICIPIO INT,
        NM_MUNICIPIO VARCHAR(255),
        NR_ZONA INT,
        CD_CARGO INT,
        DS_CARGO VARCHAR(255),
        SQ_CANDIDATO BIGINT,
        NR_CANDIDATO INT,
        NM_CANDIDATO VARCHAR(255),
        NM_URNA_CANDIDATO VARCHAR(255),
        NM_SOCIAL_CANDIDATO VARCHAR(255),
        CD_SITUACAO_CANDIDATURA INT,
        DS_SITUACAO_CANDIDATURA VARCHAR(255),
        CD_DETALHE_SITUACAO_CAND INT,
        DS_DETALHE_SITUACAO_CAND VARCHAR(255),
        CD_SITUACAO_JULGAMENTO INT,
        DS_SITUACAO_JULGAMENTO VARCHAR(255),
        CD_SITUACAO_CASSACAO INT,
        DS_SITUACAO_CASSACAO VARCHAR(255),
        CD_SITUACAO_DIPLOMA INT,
        DS_SITUACAO_DIPLOMA VARCHAR(255),
        TP_AGREMIACAO VARCHAR(255),
        NR_PARTIDO INT,
        SG_PARTIDO VARCHAR(255),
        NM_PARTIDO VARCHAR(255),
        NR_FEDERACAO INT,
        NM_FEDERACAO VARCHAR(255),
        SG_FEDERACAO VARCHAR(255),
        DS_COMPOSICAO_FEDERACAO VARCHAR(255),
        SQ_COLIGACAO BIGINT,
        NM_COLIGACAO VARCHAR(255),
        DS_COMPOSICAO_COLIGACAO VARCHAR(255),
        ST_VOTO_EM_TRANSITO VARCHAR(255),
        QT_VOTOS_NOMINAIS INT,
        NM_TIPO_DESTINACAO_VOTOS VARCHAR(255),
        QT_VOTOS_NOMINAIS_VALIDOS INT,
        CD_SIT_TOT_TURNO INT,
        DS_SIT_TOT_TURNO VARCHAR(255),
        PRIMARY KEY (SQ_CANDIDATO, CD_ELEICAO),
        FOREIGN KEY (SG_UF, NM_UE) REFERENCES UF(SG_UF, NM_UE),
        FOREIGN KEY (CD_ELEICAO) REFERENCES ELEICAO(CD_ELEICAO),
        FOREIGN KEY (SQ_CANDIDATO) REFERENCES CANDIDATO(SQ_CANDIDATO)
    );
END;

-- Verificar se a tabela PARTIDO existe
IF OBJECT_ID('dbo.PARTIDO', 'U') IS NULL
BEGIN
    -- Criar a tabela PARTIDO
    CREATE TABLE PARTIDO (
        NR_PARTIDO INT PRIMARY KEY,
        SG_PARTIDO VARCHAR(255),
        NM_PARTIDO VARCHAR(255)
    );
END;

-- Verificar se a tabela SITUACAO_TURNO existe
IF OBJECT_ID('dbo.SITUACAO_TURNO', 'U') IS NULL
BEGIN
    -- Criar a tabela SITUACAO_TURNO
    CREATE TABLE SITUACAO_TURNO (
        CD_SIT_TOT_TURNO INT PRIMARY KEY,
        DS_SIT_TOT_TURNO VARCHAR(255)
    );
END;

-- Verificar se a tabela AJUSTADO existe
IF OBJECT_ID('dbo.AJUSTADO', 'U') IS NULL
BEGIN
    -- Criar a tabela AJUSTADO
    CREATE TABLE AJUSTADO (
        DT_GERACAO DATE,
        HH_GERACAO TIME,
        ANO_ELEICAO INT,
        CD_TIPO_ELEICAO INT,
        NM_TIPO_ELEICAO VARCHAR(255),
        NR_TURNO INT,
        CD_ELEICAO INT,
        DS_ELEICAO VARCHAR(255),
        DT_ELEICAO DATE,
        TP_ABRANGENCIA VARCHAR(255),
        SG_UF VARCHAR(2),
        SG_UE VARCHAR(255),
        NM_UE VARCHAR(255),
        CD_MUNICIPIO INT,
        NM_MUNICIPIO VARCHAR(255),
        NR_ZONA INT,
        CD_CARGO INT,
        DS_CARGO VARCHAR(255),
        SQ_CANDIDATO BIGINT,
        NR_CANDIDATO INT,
        NM_CANDIDATO VARCHAR(255),
        NM_URNA_CANDIDATO VARCHAR(255),
        NM_SOCIAL_CANDIDATO VARCHAR(255),
        CD_SITUACAO_CANDIDATURA INT,
        DS_SITUACAO_CANDIDATURA VARCHAR(255),
        CD_DETALHE_SITUACAO_CAND INT,
        DS_DETALHE_SITUACAO_CAND VARCHAR(255),
        CD_SITUACAO_JULGAMENTO INT,
        DS_SITUACAO_JULGAMENTO VARCHAR(255),
        CD_SITUACAO_CASSACAO INT,
        DS_SITUACAO_CASSACAO VARCHAR(255),
        CD_SITUACAO_DIPLOMA INT,
        DS_SITUACAO_DIPLOMA VARCHAR(255),
        TP_AGREMIACAO VARCHAR(255),
        NR_PARTIDO INT,
        SG_PARTIDO VARCHAR(255),
        NM_PARTIDO VARCHAR(255),
        NR_FEDERACAO INT,
        NM_FEDERACAO VARCHAR(255),
        SG_FEDERACAO VARCHAR(255),
        DS_COMPOSICAO_FEDERACAO VARCHAR(255),
        SQ_COLIGACAO BIGINT,
        NM_COLIGACAO VARCHAR(255),
        DS_COMPOSICAO_COLIGACAO VARCHAR(255),
        ST_VOTO_EM_TRANSITO VARCHAR(255),
        QT_VOTOS_NOMINAIS INT,
        NM_TIPO_DESTINACAO_VOTOS VARCHAR(255),
        QT_VOTOS_NOMINAIS_VALIDOS INT,
        CD_SIT_TOT_TURNO INT,
        DS_SIT_TOT_TURNO VARCHAR(255)
    );
END
ELSE
BEGIN
    -- Se a tabela existir, verificar e adicionar as colunas necess√°rias
    IF COL_LENGTH('dbo.AJUSTADO', 'DT_GERACAO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD DT_GERACAO DATE;
    IF COL_LENGTH('dbo.AJUSTADO', 'HH_GERACAO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD HH_GERACAO TIME;
    IF COL_LENGTH('dbo.AJUSTADO', 'ANO_ELEICAO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD ANO_ELEICAO INT;
    IF COL_LENGTH('dbo.AJUSTADO', 'CD_TIPO_ELEICAO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD CD_TIPO_ELEICAO INT;
    IF COL_LENGTH('dbo.AJUSTADO', 'NM_TIPO_ELEICAO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD NM_TIPO_ELEICAO VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'NR_TURNO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD NR_TURNO INT;
    IF COL_LENGTH('dbo.AJUSTADO', 'CD_ELEICAO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD CD_ELEICAO INT;
    IF COL_LENGTH('dbo.AJUSTADO', 'DS_ELEICAO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD DS_ELEICAO VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'DT_ELEICAO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD DT_ELEICAO DATE;
    IF COL_LENGTH('dbo.AJUSTADO', 'TP_ABRANGENCIA') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD TP_ABRANGENCIA VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'SG_UF') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD SG_UF VARCHAR(2);
    IF COL_LENGTH('dbo.AJUSTADO', 'SG_UE') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD SG_UE VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'NM_UE') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD NM_UE VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'CD_MUNICIPIO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD CD_MUNICIPIO INT;
    IF COL_LENGTH('dbo.AJUSTADO', 'NM_MUNICIPIO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD NM_MUNICIPIO VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'NR_ZONA') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD NR_ZONA INT;
    IF COL_LENGTH('dbo.AJUSTADO', 'CD_CARGO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD CD_CARGO INT;
    IF COL_LENGTH('dbo.AJUSTADO', 'DS_CARGO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD DS_CARGO VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'SQ_CANDIDATO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD SQ_CANDIDATO BIGINT;
    IF COL_LENGTH('dbo.AJUSTADO', 'NR_CANDIDATO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD NR_CANDIDATO INT;
    IF COL_LENGTH('dbo.AJUSTADO', 'NM_CANDIDATO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD NM_CANDIDATO VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'NM_URNA_CANDIDATO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD NM_URNA_CANDIDATO VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'NM_SOCIAL_CANDIDATO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD NM_SOCIAL_CANDIDATO VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'CD_SITUACAO_CANDIDATURA') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD CD_SITUACAO_CANDIDATURA INT;
    IF COL_LENGTH('dbo.AJUSTADO', 'DS_SITUACAO_CANDIDATURA') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD DS_SITUACAO_CANDIDATURA VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'CD_DETALHE_SITUACAO_CAND') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD CD_DETALHE_SITUACAO_CAND INT;
    IF COL_LENGTH('dbo.AJUSTADO', 'DS_DETALHE_SITUACAO_CAND') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD DS_DETALHE_SITUACAO_CAND VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'CD_SITUACAO_JULGAMENTO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD CD_SITUACAO_JULGAMENTO INT;
    IF COL_LENGTH('dbo.AJUSTADO', 'DS_SITUACAO_JULGAMENTO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD DS_SITUACAO_JULGAMENTO VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'CD_SITUACAO_CASSACAO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD CD_SITUACAO_CASSACAO INT;
    IF COL_LENGTH('dbo.AJUSTADO', 'DS_SITUACAO_CASSACAO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD DS_SITUACAO_CASSACAO VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'CD_SITUACAO_DIPLOMA') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD CD_SITUACAO_DIPLOMA INT;
    IF COL_LENGTH('dbo.AJUSTADO', 'DS_SITUACAO_DIPLOMA') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD DS_SITUACAO_DIPLOMA VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'TP_AGREMIACAO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD TP_AGREMIACAO VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'NR_PARTIDO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD NR_PARTIDO INT;
    IF COL_LENGTH('dbo.AJUSTADO', 'SG_PARTIDO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD SG_PARTIDO VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'NM_PARTIDO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD NM_PARTIDO VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'NR_FEDERACAO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD NR_FEDERACAO INT;
    IF COL_LENGTH('dbo.AJUSTADO', 'NM_FEDERACAO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD NM_FEDERACAO VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'SG_FEDERACAO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD SG_FEDERACAO VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'DS_COMPOSICAO_FEDERACAO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD DS_COMPOSICAO_FEDERACAO VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'SQ_COLIGACAO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD SQ_COLIGACAO BIGINT;
    IF COL_LENGTH('dbo.AJUSTADO', 'NM_COLIGACAO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD NM_COLIGACAO VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'DS_COMPOSICAO_COLIGACAO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD DS_COMPOSICAO_COLIGACAO VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'ST_VOTO_EM_TRANSITO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD ST_VOTO_EM_TRANSITO VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'QT_VOTOS_NOMINAIS') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD QT_VOTOS_NOMINAIS INT;
    IF COL_LENGTH('dbo.AJUSTADO', 'NM_TIPO_DESTINACAO_VOTOS') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD NM_TIPO_DESTINACAO_VOTOS VARCHAR(255);
    IF COL_LENGTH('dbo.AJUSTADO', 'QT_VOTOS_NOMINAIS_VALIDOS') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD QT_VOTOS_NOMINAIS_VALIDOS INT;
    IF COL_LENGTH('dbo.AJUSTADO', 'CD_SIT_TOT_TURNO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD CD_SIT_TOT_TURNO INT;
    IF COL_LENGTH('dbo.AJUSTADO', 'DS_SIT_TOT_TURNO') IS NULL
        ALTER TABLE dbo.AJUSTADO ADD DS_SIT_TOT_TURNO VARCHAR(255);
END;